"use strict";!function(r){r(function(){var n=getQueryVariable("id");r.get("http://localhost:1001/main3",function(o){r(o).each(function(a){if(o[a].id==n){r(".allPrice").text(o[a].price);var t='\n                    \n                   \n                    <div class="box">\n                        <div class="zoom"></div>\n                        <img class="smallSize" src="../'+o[a].src+'" />\n                    </div>\n                    \n                    ',e=" <h3>"+o[a].title+'</h3><p class="price">价格'+o[a].price+"</p>";r("#deConnect").html(t),r(".bigSize").html('<img src="../'+o[a].src+'" />'),r("#base").prepend(e),r(".add").click(function(){r("#addnum").val(+r("#addnum").val()+1),r(".allPrice").text(r("#addnum").val()*o[a].price)}),r(".sub").click(function(){1<r("#addnum").val()&&(r("#addnum").val(r("#addnum").val()-1),r(".allPrice").text(r("#addnum").val()*o[a].price))}),r("#addnum").change(function(){r(".allPrice").text(r("#addnum").val()*o[a].price)}),r(".addCart").click(function(){var a=JSON.parse(localStorage.getItem("userData"));if(a)var l="1003/userData/"+a.id;else l="1002/data";r.get("http://localhost:"+l,function(a){if(console.log(a),a.cartData)var c=JSON.parse(a.cartData);else c=[];if(console.log(c),""!=c)r(c).each(function(a){if(c[a].id==n){var t=Number(c[a].num),e=Number(c[a].price);c[a].num=t+Number(r("#addnum").val()),c[a].price=Number(r(".allPrice").text())+e,console.log(c[a].num,c[a].price);var o=JSON.stringify(c);r.ajax({type:"patch",url:"http://localhost:"+l,data:{cartData:o}})}else{console.log("aa");var i={id:n,num:r("#addnum").val(),price:+r(".allPrice").text()};c.push(i),c=JSON.stringify(c),r.ajax({type:"patch",url:"http://localhost:"+l,data:{cartData:c}})}});else{console.log("aa");var t=[{id:n,num:r("#addnum").val(),price:+r(".allPrice").text()}];t=JSON.stringify(t),r.ajax({type:"patch",url:"http://localhost:"+l,data:{cartData:t}})}})})}}),r(".box").hover(function(){r(".zoom").css("display","block"),r(".bigSize").css("display","block")},function(){r(".zoom").css("display","none"),r(".bigSize").css("display","none")}),r(".box").mousemove(function(a){var t=a.pageX-r(".box").offset().left-r(".zoom").outerWidth()/2,e=a.pageY-r(".box").offset().top-r(".zoom").outerHeight()/2,o=r(".box").outerWidth()-r(".zoom").outerWidth(),i=r(".box").outerHeight()-r(".zoom").outerHeight();t=t<0?0:o<t?o:t,e=e<0?0:i<e?i:e,r(".zoom").css({left:t,top:e}),r(".bigSize img").css({left:2*-t,top:2*-e})})})})}(jQuery);